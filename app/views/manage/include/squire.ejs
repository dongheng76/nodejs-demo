<div id="<%=input%>" class="edui-container" 
	<%if(typeof(width) != 'undefined'){%>
		style="width:${width}px;"
	<%}else{%>
		style="width:340px;"
	<%}%>
	>
    <div class="edui-disabled" <c:if test="${disabled == \"disabled\"}">style='display:block'</c:if>></div>
    <div class="edui-toolbar">
        <div class="edui-btn-toolbar">
            <div class="edui-btn edui-btn- edui-btn-name-paragraph edui-combobox edui-relative" title="段落格式">
                <span class="edui-button-label">字号</span>
                <span class="edui-button-spacing"></span>
                <span class="edui-caret"></span>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
                <ul class="dropdown-menu edui-combobox-menu edui-combobox-paragraph" style="z-index: 1000; top: 24px; left: -2px;">
                    <li data-action="expandSetTag" data-value="div" class="edui-combobox-item edui-combobox-checked">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="">默认</label>
                    </li>
                    <li data-action="expandSetTag" data-value="h1" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="">特小</label>
                    </li>
                    <li data-action="expandSetTag" data-value="h2" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="">小号</label>
                    </li>
                    <li data-action="expandSetTag" data-value="h3" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="">中号</label>
                    </li>
                    <li data-action="expandSetTag" data-value="h4" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="">较大</label>
                    </li>
                    <li data-action="expandSetTag" data-value="h5" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="">大号</label>
                    </li>
                    <li data-action="expandSetTag" data-value="h6" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="">特大</label>
                    </li>
                </ul>
            </div>
            <div class="edui-btn edui-btn- edui-btn-name-fontfamily edui-combobox edui-relative" title="字体">
                <span class="edui-button-label">字体</span>
                <span class="edui-button-spacing"></span>
                <span class="edui-caret"></span>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
                <ul class="dropdown-menu edui-combobox-menu edui-combobox-fontfamily" style="z-index: 1000; top: 24px; left: -2px;">
                    <li data-action="setFontFace" data-value="微软雅黑, Microsoft YaHei" class="edui-combobox-item edui-combobox-checked">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: 微软雅黑, Microsoft YaHei">微软雅黑</label>
                    </li>
                    <li class="edui-combobox-item-separator"></li>
                    <li data-action="setFontFace" data-value="宋体, SimSun" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: 宋体, SimSun">宋体</label>
                    </li>
                    <li data-action="setFontFace" data-value="楷体, 楷体_GB2312, SimKai" class="edui-combobox-item ">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: 楷体, 楷体_GB2312, SimKai">楷体</label>
                    </li>
                    <li data-action="setFontFace" data-value=" 黑体, SimHei" class="edui-combobox-item ">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: 黑体, SimHei">黑体</label>
                    </li>
                    <li data-action="setFontFace" data-value="隶书, SimLi" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: 隶书, SimLi">隶书</label>
                    </li>
                    <li data-action="setFontFace" data-value="andale mono" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: andale mono">andale mono</label>
                    </li>
                    <li data-action="setFontFace" data-value="arial, helvetica, sans-serif" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: arial, helvetica, sans-serif">arial</label>
                    </li>
                    <li data-action="setFontFace" data-value="arial black, avant garde" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: arial black, avant garde">arial black</label>
                    </li>
                    <li data-action="setFontFace" data-value="comic sans ms" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: comic sans ms">comic sans ms</label>
                    </li>
                    <li data-action="setFontFace" data-value="impact, chicago" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: impact, chicago">impact</label>
                    </li>
                    <li data-action="setFontFace" data-value="times new roman" class="edui-combobox-item">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: times new roman">times new roman</label>
                    </li>
                    <li data-action="setFontFace" data-value="sans-serif" class="edui-combobox-item edui-combobox-checked">
                        <span class="edui-combobox-icon"></span>
                        <label class="edui-combobox-item-label" style="font-family: sans-serif">sans-serif</label>
                    </li>
                </ul>
            </div>

            <div data-action="expandMakeLink" class="edui-btn edui-btn-link edui-box-relative" title="超链接">
                <div class="edui-icon-link edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
                <div class="edui-dialog-box edui-combobox-paragraph" style="z-index: 1000; top: 24px; left: -2px;">
                    <div class="edui-dialog-box-row">
                        <label>链接地址：</label>
                        <input name="link" type="text" class="deui-link-href" />
                    </div>
                    <div class="edui-dialog-box-row">
                        <label>新窗口打开：</label>
                        <input name="new" type="checkbox" class="deui-link-taget" value="0">
                    </div>
                    <div class="edui-dialog-box-row">
                        <span class="edui-dialog-box-button" onclick="this.parentNode.parentNode.style.display='none';event.stopPropagation();">取消</span>
                        <span id="edui-link-button" class="edui-dialog-box-button">确定</span>
                    </div>
                </div>
            </div>
            <div data-action="removeLink" class="edui-btn edui-btn-unlink" title="取消链接">
                <div class="edui-icon-unlink edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner">取消链接</div>
                </div>
            </div>

            <div data-action="expandSetBold" class="edui-btn edui-btn-bold" title="加粗">
                <div class="edui-icon-bold edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="expandSetItalic" class="edui-btn edui-btn-italic" title="斜体">
                <div class="edui-icon-italic edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="expandSetUnderline" class="edui-btn edui-btn-underline" title="下划线">
                <div class="edui-icon-underline edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="expandStrike" class="edui-btn edui-btn-strikethrough" title="删除线">
                <div class="edui-icon-strikethrough edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="expandSup" class="edui-btn edui-btn-superscript" title="上标">
                <div class="edui-icon-superscript edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="expandSub" class="edui-btn edui-btn-subscript" title="下标">
                <div class="edui-icon-subscript edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div class="edui-splitbutton edui-splitbutton-forecolor edui-box-relative" title="字体颜色" onmousedown="return false;">
                <div class="edui-btn">
                    <div class="edui-icon-forecolor edui-icon"></div>
                    <div class="edui-splitbutton-color-label"></div>
                </div>
                <div class="edui-btn edui-dropdown-toggle">
                    <div class="edui-caret"></div>
                </div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
                <div id="color-picker-font" class="cp-small"></div>
            </div>
            <div class="edui-splitbutton edui-splitbutton-backcolor" title="背景色" onmousedown="return false;">
                <div class="edui-btn">
                    <div class="edui-icon-backcolor edui-icon"></div>
                    <div class="edui-splitbutton-color-label"></div>
                </div>
                <div class="edui-btn edui-dropdown-toggle">
                    <div class="edui-caret"></div>
                </div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
                <div id="color-picker-bg" class="cp-small"></div>
            </div>
            <div data-action="expandMakeOrderedList" class="edui-btn edui-btn-insertorderedlist" title="有序列表">
                <div class="edui-icon-insertorderedlist edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="expandMakeUnorderedList" class="edui-btn edui-btn-insertunorderedlist" title="无序列表">
                <div class="edui-icon-insertunorderedlist edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="setHTML" data-value="" class="edui-btn edui-btn-cleardoc" title="清空文档">
                <div class="edui-icon-cleardoc edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>

            <div data-action="setTextAlignment" data-value="left" class="edui-btn edui-btn-justifyleft" title="居左对齐">
                <div class="edui-icon-justifyleft edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="setTextAlignment" data-value="center" class="edui-btn edui-btn-justifycenter" title="居中对齐">
                <div class="edui-icon-justifycenter edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="setTextAlignment" data-value="right" class="edui-btn edui-btn-justifyright" title="居右对齐">
                <div class="edui-icon-justifyright edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="expandInsertImg" class="edui-btn edui-btn-image" title="图片">
                <div class="edui-icon-image edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="horizontalLine" class="edui-btn edui-btn-horizontal" title="分隔线">
                <div class="edui-icon-horizontal edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="expandSelectAll" class="edui-btn edui-btn-selectall" title="全选">
                <div class="edui-icon-selectall edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="removeAllFormatting" class="edui-btn edui-btn-removeformat" title="清除格式">
                <div class="edui-icon-removeformat edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="undo" class="edui-btn edui-btn-undo" title="撤销">
                <div class="edui-icon-undo edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
            <div data-action="redo" class="edui-btn edui-btn-redo" title="重做">
                <div class="edui-icon-redo edui-icon"></div>
                <div class="edui-tooltip">
                    <div class="edui-tooltip-arrow"></div>
                    <div class="edui-tooltip-inner"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="edui-editor-body">
        <div id="<%=input%>Editor" class="edui-body-container" contenteditable="true" style="<c:choose><c:when test="${not empty width}">width:${width-20}px;</c:when><c:otherwise>width:320px;</c:otherwise></c:choose><c:choose><c:when test="${not empty height}">height:${height}px;</c:when></c:choose>"></div>
    </div>
</div>
<script type="text/javascript">
	//选择相册后回调
    function <%=input%>SelectAction(files){
    	for(var i = 0 ; i < files.length; i++){
    		<%=input%>editor.insertImage(files[i].path + files[i].name + '.' + files[i].suffix);
    	}
    }
	var <%=input%>editor = new Squire(document.querySelector("#<%=input%>Editor"), {
        blockTag : 'div',
        blockAttributes : {
	        'class' : 'editor_row',
        },
        tagAttributes : {
            ul : {
	            'class' : 'editor_ul'
            },
            ol : {
	            'class' : 'editor_ol'
            },
            li : {
	            'class' : 'editor_listItem'
            }
        }
    });
    <%=input%>editor.addEventListener('willPaste', function(event) {
	    <%=input%>editor.removeFragmentFormatting(event.fragment);
    });
    <%=input%>editor.expandSelectAll = function() {
	    <%=input%>editor.focus();
	    var range = <%=input%>editor.getSelection();
	    var n = document.querySelector("#<%=input%>Editor");
	    range.selectNodeContents(n);
	    <%=input%>editor.setSelection(range);
    };
    <%=input%>editor.horizontalLine = function() {
	    <%=input%>editor.insertHTML('<div class="row-line"><hr/></div>');
    };
    <%=input%>editor.expandStrike = function(value) {
	    if (<%=input%>editor.hasFormat("strike")) {
		    <%=input%>editor.changeFormat(null, {
			    tag : "strike"
		    });
	    } else {
		    <%=input%>editor.changeFormat({
			    tag : "strike"
		    });
	    }
    };
    <%=input%>editor.expandSub = function() {
	    var p1 = {
		    tag : "sub"
	    };
	    var p2 = {
		    tag : "sub"
	    }
	    if (<%=input%>editor.hasFormat("sub")) {
		    p1 = null;
	    }
	    if (<%=input%>editor.hasFormat("sup")) {
		    p1 = null;
		    p2 = {
			    tag : "sup"
		    };
	    }
	    <%=input%>editor.changeFormat(p1, p2);
    };
    <%=input%>editor.expandSup = function() {
	    var p1 = {
		    tag : "sup"
	    };
	    var p2 = {
		    tag : "sup"
	    }
	    if (<%=input%>editor.hasFormat("sup")) {
		    p1 = null;
	    }
	    if (<%=input%>editor.hasFormat("sub")) {
		    p1 = null;
		    p2 = {
			    tag : "sub"
		    };
	    }
	    <%=input%>editor.changeFormat(p1, p2);
    };
    <%=input%>editor.expandSetBold = function() {
	    if (<%=input%>editor.hasFormat("b")) {
		    <%=input%>editor.removeBold();
	    } else {
		    <%=input%>editor.bold();
	    }
    }
    <%=input%>editor.expandSetItalic = function() {
	    if (<%=input%>editor.hasFormat("i")) {
		    <%=input%>editor.removeItalic();
	    } else {
		    <%=input%>editor.italic();
	    }
    }
    <%=input%>editor.expandSetUnderline = function() {
	    if (<%=input%>editor.hasFormat("u")) {
		    <%=input%>editor.removeUnderline();
	    } else {
		    <%=input%>editor.underline();
	    }
    }
    <%=input%>editor.expandMakeOrderedList = function() {
	    if (<%=input%>editor.hasFormat("ol", {
		    'class' : 'editor_ol'
	    })) {
		    <%=input%>editor.removeList();
	    } else {
		    <%=input%>editor.makeOrderedList();
	    }
    }
    <%=input%>editor.expandMakeUnorderedList = function() {
	    if (<%=input%>editor.hasFormat("ul", {
		    'class' : 'editor_ol'
	    })) {
		    <%=input%>editor.removeList();
	    } else {
		    <%=input%>editor.makeUnorderedList();
	    }
    }
    <%=input%>editor.expandSetFontSize = function(value) {
	    var p1 = {
	        tag : 'span',
	        attributes : {
	            'class' : 'size',
	            style : 'font-size: ' + value + ';line-height: ' + value.replace(/(\d\.\d)(\w+)/, function($1, $2, $3) {
		            return Number($2) + 0.3 + $3
	            })
	        }
	    }
	    var p2 = {
	        tag : 'span',
	        attributes : {
	            'class' : 'size',
	            style : ''
	        }
	    }
	    <%=input%>editor.focus();
	    <%=input%>editor.changeFormat(p1, p2)
    }
    <%=input%>editor.expandSetTag = function(value) {
	    var p1 = {
	        tag : "span",
	        attributes : {
		        'class' : value
	        }
	    }
	    if (value == "div") {
		    p1 = {
		        tag : "div",
		        attributes : {
			        'class' : 'editor_row'
		        }
		    }
	    }
	    <%=input%>editor.changeFormat(null, {
	        tag : "span",
	        attributes : {
		        'class' : 'h1'
	        }
	    });
	    <%=input%>editor.changeFormat(null, {
	        tag : "span",
	        attributes : {
		        'class' : 'h2'
	        }
	    });
	    <%=input%>editor.changeFormat(null, {
	        tag : "span",
	        attributes : {
		        'class' : 'h3'
	        }
	    });
	    <%=input%>editor.changeFormat(null, {
	        tag : "span",
	        attributes : {
		        'class' : 'h4'
	        }
	    });
	    <%=input%>editor.changeFormat(null, {
	        tag : "span",
	        attributes : {
		        'class' : 'h5'
	        }
	    });
	    <%=input%>editor.changeFormat(null, {
	        tag : "span",
	        attributes : {
		        'class' : 'h6'
	        }
	    });
	    <%=input%>editor.changeFormat(p1);
	    <%=input%>editor.focus();
    }
    
    <%=input%>editor.expandInsertImg = function(){
    	var url = "/manage/file/simple?type=images&isDialog=true&func=<%=input%>SelectAction&sm=1";
    	<%=input%>editor.focus();
    	windowOpen(url,"图片选择",1280,800);
    }

    <%=input%>editor.expandMakeLink = function() {
    	var ele = document.querySelector("#<%=input%> .edui-btn-link .edui-dialog-box");
	    ele.style.display = 'block';
    }

    //绑定按钮 事件
    var <%=input%>Btn = document.querySelectorAll("#<%=input%> .edui-btn");
    for (var i = 0; i < <%=input%>Btn.length; i++) {
	    <%=input%>Btn[i].addEventListener("click", function() {
		    var action = this.getAttribute("data-action");
		    var value = this.getAttribute("data-value");
		    action && <%=input%>editor[action](value);
	    }, false);
    }
    //隐藏所有弹框
    var hideAllDialog = function() {
	    var <%=input%>Dialog = document.querySelectorAll("#<%=input%> .edui-combobox-menu");
	    for (var i = 0; i < <%=input%>Dialog.length; i++) {
		    <%=input%>Dialog[i].style.display = "none";
	    }
	    var <%=input%>Color = document.querySelectorAll("#<%=input%> .cp-small");
	    for (var i = 0; i < <%=input%>Color.length; i++) {
		    <%=input%>Color[i].style.display = "none";
	    }
    }
    //点击隐藏所有弹框
    document.addEventListener("click", function() {
	    hideAllDialog();
    }, false);
    var <%=input%>DialogBtn = document.querySelectorAll("#<%=input%> .edui-relative");
    //绑定按钮点击事件
    for (var i = 0; i < <%=input%>DialogBtn.length; i++) {
	    <%=input%>DialogBtn[i].addEventListener("click", function(ev) {
		    var e = this.querySelector(".edui-combobox-menu");
		    if (e.style.display == 'block') {
			    hideAllDialog();
		    } else {
			    hideAllDialog();
			    this.querySelector(".edui-combobox-menu").style.display = "block";
		    }
		    ev.stopPropagation();
	    }, false);
    };
    var <%=input%>DialogEle = document.querySelectorAll("#<%=input%> .edui-combobox-item");
    for (var i = 0; i < <%=input%>DialogEle.length; i++) {
	    <%=input%>DialogEle[i].addEventListener("click", function() {
		    var action = this.getAttribute("data-action");
		    var value = this.getAttribute("data-value");
		    action && <%=input%>editor[action](value);
	    }, false);
    }

    //链接按钮点击事件
    var <%=input%>DialogLinkButton = document.querySelector("#<%=input%> #edui-link-button");
    <%=input%>DialogLinkButton.addEventListener("click", function(e) {
	    hideAllDialog();
	    var box = this.parentNode.parentNode;
	    box.style.display = "none";
	    var value = box.querySelector(".deui-link-href").value;
	    var taget = box.querySelector(".deui-link-taget").checked;
	    var attrs = {
		    target : '_blank'
	    }
	    if (!taget) {
		    attrs = undefined;
	    }
	    <%=input%>editor.makeLink(value, attrs);
	    e.stopPropagation();
    }, false);

    //加载颜色选择器
    ColorPicker(document.getElementById('color-picker-font'), function(hex, hsv, rgb) {
	    var e = document.querySelector("#<%=input%> .edui-splitbutton-forecolor .edui-splitbutton-color-label");
	    e.style.backgroundColor = hex; // #HEX
	    <%=input%>editor.setTextColour(hex);
    });
    document.querySelector("#<%=input%> .edui-splitbutton-forecolor").addEventListener("click", function(e) {
	    hideAllDialog();
	    var el = this.querySelector(".cp-small");
	    if (el.style.display == 'block') {
		    el.style.display = "none";
	    } else {
		    el.style.display = "block";
	    }
	    e.stopPropagation();
    }, false);
    //加载颜色选择器
    ColorPicker(document.getElementById('color-picker-bg'), function(hex, hsv, rgb) {
	    var e = document.querySelector("#<%=input%> .edui-splitbutton-backcolor .edui-splitbutton-color-label");
	    e.style.backgroundColor = hex; // #HEX
	    <%=input%>editor.setHighlightColour(hex);
    });
    document.querySelector("#<%=input%> .edui-splitbutton-backcolor").addEventListener("click", function(e) {
	    hideAllDialog();
	    var el = this.querySelector(".cp-small");
	    if (el.style.display == 'block') {
		    el.style.display = "none";
	    } else {
		    el.style.display = "block";
	    }
	    e.stopPropagation();
    }, false);
    var <%=input%>colorsbg = document.querySelectorAll("#<%=input%> .cp-small");
    for (var i = 0; i < <%=input%>colorsbg.length; i++) {
    	<%=input%>colorsbg[i].addEventListener("click", function(e) {
		    e.stopPropagation();
	    }, false);
    }
    var <%=input%>Textarea = document.querySelector("#<%=input%>");
    <%=input%>editor.addEventListener("input",function(e){
    	<%=input%>Textarea.value = <%=input%>editor.getHTML();
    });
    <%=input%>editor.setHTML(<%=input%>Textarea.value);
</script>

